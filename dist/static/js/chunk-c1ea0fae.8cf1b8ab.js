(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1ea0fae"],{"1bfe":function(t,e,a){},"1e55":function(t,e,a){"use strict";a.d(e,"h",(function(){return h})),a.d(e,"c",(function(){return p})),a.d(e,"f",(function(){return g})),a.d(e,"m",(function(){return v})),a.d(e,"a",(function(){return y})),a.d(e,"o",(function(){return k})),a.d(e,"j",(function(){return b})),a.d(e,"n",(function(){return S})),a.d(e,"b",(function(){return O})),a.d(e,"q",(function(){return D})),a.d(e,"p",(function(){return I})),a.d(e,"g",(function(){return j})),a.d(e,"d",(function(){return w})),a.d(e,"k",(function(){return C})),a.d(e,"i",(function(){return P})),a.d(e,"l",(function(){return L})),a.d(e,"e",(function(){return _})),a.d(e,"r",(function(){return R}));a("a15b"),a("c7eb"),a("1da1");var r=a("53ca"),n=(a("caad"),a("fb6a"),a("e9c4"),a("b64b"),a("d3b7"),a("2532"),a("bc3a")),i=a.n(n),s=a("5c96"),o=a("4360"),c=(a("5f87"),a("81ae")),u=a("c38a"),d=a("63f0"),l=(a("21a6"),{show:!1});i.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var m=i.a.create({baseURL:"http://sunkoda.us.to:9002",timeout:1e4});m.interceptors.request.use((function(t){var e=!1===(t.headers||{}).isToken,a=!1===(t.headers||{}).repeatSubmit,n="eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6IjZhMGMzMGU5LWU5YzAtNDk4Ni1iZTRjLTk0NzRhMDM3OGM4MyJ9.xpwt1tZG44qGYW1NA-55T7kAR53lR6-DsTTXY2zQzzCciBRZml5EZrACcGkJYVVp7m0JgI57sdSCNUJkzd6NJg";if(n&&!e&&(t.headers["Authorization"]="Bearer "+n),"get"===t.method&&t.params){var i=t.url+"?"+Object(u["j"])(t.params);i=i.slice(0,-1),t.params={},t.url=i}if(!a&&("post"===t.method||"put"===t.method)){var s={url:t.url,data:"object"===Object(r["a"])(t.data)?JSON.stringify(t.data):t.data,time:(new Date).getTime()},o=d["a"].session.getJSON("sessionObj");if(void 0===o||null===o||""===o)d["a"].session.setJSON("sessionObj",s);else{var c=o.url,l=o.data,m=o.time,f=1e3;if(l===s.data&&s.time-m<f&&c===s.url){var h="数据正在处理，请勿重复提交";return console.warn("[".concat(c,"]: ")+h),Promise.reject(new Error(h))}d["a"].session.setJSON("sessionObj",s)}}return t}),(function(t){console.log(t),Promise.reject(t)})),m.interceptors.response.use((function(t){var e=t.data.code||200,a=c["a"][e]||t.data.msg||c["a"]["default"];return"blob"===t.request.responseType||"arraybuffer"===t.request.responseType?t.data:401===e?(l.show||(l.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){l.show=!1,o["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){l.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===e?(Object(s["Message"])({message:a,type:"error"}),Promise.reject(new Error(a))):200!==e?(s["Notification"].error({title:a}),Promise.reject("error")):t.data}),(function(t){console.log("err"+t);var e=t.message;return"Network Error"==e?e="后端接口连接异常":e.includes("timeout")?e="系统接口请求超时":e.includes("Request failed with status code")&&(e="系统接口"+e.substr(e.length-3)+"异常"),Object(s["Message"])({message:e,type:"error",duration:5e3}),Promise.reject(t)}));var f=m,h=function(){return f({url:"/system/StatisticalData/getMapDataList",method:"get"})};function p(t){return f({url:"/system/StatisticalData/getClockInTodayTollCollector",method:"get",params:{deptIds:t}})}function g(t){return f({url:"/system/StatisticalData/getImg",method:"get",params:{imgId:t}})}function v(t){return f({url:"/system/StatisticalData/getPreferentialOrderTypeProportion",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function y(t){return f({url:"/system/StatisticalData/getAbnormalOrderTypeProportion",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function k(t){return f({url:"/system/StatisticalData/getSourceOfIncomeProportion",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function b(t){return f({url:"/system/StatisticalData/getParkingOrderIncomeTotalByDeptId",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function S(t){return f({url:"/system/StatisticalData/getReceiveRecord",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function O(t){return f({url:"/system/StatisticalData/getAccessRecord",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function D(t){return f({url:"/system/StatisticalData/getWarningOrder",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function I(t){return f({url:"/system/StatisticalData/getWarningLock",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function j(t){return f({url:"/system/StatisticalData/getOrderRevenueLineChart",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function w(){return f({url:"/system/StatisticalData/getDeptRelatedInfo",method:"get"})}function C(t){var e="all"==t?"/system/StatisticalData/getParkingOrderTypePieChart":"/system/StatisticalData/getParkingOrderTypePieChart?parkingLotIds=".concat(t);return f({url:e,method:"get"})}function P(t){var e="all"==t?"/system/StatisticalData/getParkingOrderDurationPercentagePieChart":"/system/StatisticalData/getParkingOrderDurationPercentagePieChart?parkingLotIds=".concat(t);return f({url:e,method:"get"})}function L(t){var e="all"==t?"/system/StatisticalData/getParkingRelatedInfo":"/system/StatisticalData/getParkingRelatedInfo?parkingLotIds=".concat(t);return f({url:e,method:"get"})}function _(){return f({url:"/system/StatisticalData/getDeptRelatedInfo",method:"get"})}function R(t){var e="all"==t?"/system/StatisticalData/todayYesterdayDataComparison":"/system/StatisticalData/todayYesterdayDataComparison?parkingLotIds=".concat(t);return f({url:e,method:"get"})}},cd1e:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("div",{staticClass:"page-view-title"},[t._v("今日总收入")]),a("div",{staticClass:"income-info"},[a("div",{staticClass:"income-value",staticStyle:{"min-width":"140px"}},[t._v(" ¥ "+t._s(t.today.sourceOfIncomeSum||0)+" ")]),a("div",{staticClass:"income-chart"},[a("div",{ref:"chart"})])]),a("div",{staticClass:"income-list"},[a("div",{staticClass:"income-item color-blue"},[a("div",{staticClass:"income-item-label"},[t._v("停车订单收入")]),a("div",{staticClass:"income-item-value"},[a("span",[t._v("¥"+t._s(t.today[t.keys[0]]||0))]),a("span",[t._v(t._s(t.value1Percentage)+"%")])])]),a("div",{staticClass:"income-item color-green"},[a("div",{staticClass:"income-item-label"},[t._v("包月收入")]),a("div",{staticClass:"income-item-value"},[a("span",[t._v("¥"+t._s(t.today[t.keys[1]]||0))]),a("span",[t._v(t._s(t.value2Percentage)+"%")])])]),a("div",{staticClass:"income-item color-pink"},[a("div",{staticClass:"income-item-label"},[t._v("优惠券收入")]),a("div",{staticClass:"income-item-value"},[a("span",[t._v("¥"+t._s(t.today[t.keys[2]]||0))]),a("span",[t._v(" "+t._s(t.value3Percentage)+"%")])])])])])},n=[],i=a("2909"),s=(a("99af"),a("d81d"),a("d3b7"),a("ddb0"),a("313e")),o=a("1e55"),c={props:{data:{type:Object,default:function(){}},parkingLotIds:{type:Array,default:function(){return[]}}},data:function(){return{keys:["停车","包月","优惠券"],chart:null,today:{}}},watch:{parkingLotIds:{handler:function(){this.requestData()},deep:!0}},computed:{value1Percentage:function(){if(this.today.sourceOfIncomeSum){var t=this.today[this.keys[0]]/this.today.sourceOfIncomeSum*100;return Math.round(100*t)/100}return 0},value2Percentage:function(){if(this.today.sourceOfIncomeSum){var t=this.today[this.keys[1]]/this.today.sourceOfIncomeSum*100;return Math.round(100*t)/100}return 0},value3Percentage:function(){if(this.today.sourceOfIncomeSum){var t=this.today[this.keys[2]]/this.today.sourceOfIncomeSum*100;return Math.round(100*t)/100}return 0}},mounted:function(){this.initChart(),this.requestData()},beforeUnmount:function(){this.chart&&(window.removeEventListener("resize",this.chart.resize),window.removeEventListener("dataScreenResize",this.chart.resize),this.chart.dispose(),this.chart=null)},methods:{requestData:function(){var t=this;Object(o["o"])(this.parkingLotIds).then((function(e){var a=e.data,r=a.today,n=a.past;t.today=r,t.pastValues=n.map((function(t){return t.income})),t.setOptions()})).finally((function(){t.$bus.$emit("screenDataLoaded")}))},initChart:function(){this.chart=s["init"](this.$refs.chart,null,{renderer:"svg",useDirtyRect:!1}),window.addEventListener("resize",this.chart.resize),window.addEventListener("dataScreenResize",this.chart.resize)},setOptions:function(){var t=[{data:[].concat(Object(i["a"])(this.pastValues),[this.today[this.keys[0]]]),type:"bar",stack:"a",name:"停车订单收入",barWidth:6},{data:[].concat(Object(i["a"])(this.pastValues.map((function(){return 0}))),[this.today[this.keys[1]]]),type:"bar",stack:"a",name:"包月收入",barWidth:6},{data:[].concat(Object(i["a"])(this.pastValues.map((function(){return 0}))),[this.today[this.keys[2]]]),type:"bar",stack:"a",name:"优惠券收入",barWidth:6}];console.log(">>>>>>>>>>>>"),console.log(t);for(var e={},a=0;a<t[0].data.length;++a)for(var r=0;r<t.length;++r){var n=t[r].stack;if(n){e[n]||(e[n]={stackStart:[],stackEnd:[]});var s=e[n],o=t[r].data[a];o&&"-"!==o&&(null==s.stackStart[a]&&(s.stackStart[a]=r),s.stackEnd[a]=r)}}for(var c=0;c<t.length;++c)for(var u=t[c].data,d=e[t[c].stack],l=0;l<t[c].data.length;++l){var m=d.stackStart[l]===c,f=d.stackEnd[l]===c,h=f?50:0,p=m?50:0;u[l]={value:u[l],itemStyle:{borderRadius:[h,h,p,p]}}}var g={color:["#46A5F7","#80C269","#EA68A2"],grid:{left:0,top:0,right:0,bottom:0},xAxis:{type:"category",show:!1},yAxis:{type:"value",show:!1},series:t};this.chart.setOption(g)}}},u=c,d=(a("f1d7"),a("2877")),l=Object(d["a"])(u,r,n,!1,null,"e7660bde",null);e["default"]=l.exports},f1d7:function(t,e,a){"use strict";a("1bfe")}}]);