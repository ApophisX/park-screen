(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95f52a5c"],{"0e03":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"screen"},[a("div",{staticClass:"container"},[a("div",[a("div",[a("div",{staticStyle:{padding:"0px","font-size":"18px","margin-bottom":"5%"}},[t._v(" 当前总车位数 ")]),a("div",{staticStyle:{"font-size":"38px","font-weight":"bolder",padding:"0px","margin-bottom":"5%"}},[t._v(" "+t._s(t.dataList.total)+" ")]),a("div",{staticClass:"carNum",staticStyle:{margin:"0px"}},[a("div",{staticStyle:{"font-size":"10px","line-height":"6px"}},[t.dataList.useAll>0||t.dataList.unuseAll>0?a("span",[t._v(" "+t._s((t.dataList.useAll/(t.dataList.useAll+t.dataList.unuseAll)*100).toFixed(2))+"% ")]):a("span",[t._v(" 0% ")])]),a("div",{staticStyle:{"font-size":"10px","margin-right":"30px"}},[t.dataList.useAll>0||t.dataList.unuseAll>0?a("span",[t._v(" "+t._s((t.dataList.unuseAll/(t.dataList.useAll+t.dataList.unuseAll)*100).toFixed(2))+"% ")]):a("span",[t._v(" 0% ")])])]),a("el-progress",{attrs:{percentage:t.percentageALL,format:t.format}}),a("div",{staticClass:"carNum"},[a("div",{staticStyle:{"font-size":"10px","line-height":"20px"}},[a("span",{staticClass:"span-used",staticStyle:{"background-color":"#4ba0f8"}}),t._v(" 已用车位："+t._s(t.dataList.useAll)+" ")]),a("div",{staticStyle:{"font-size":"10px","margin-right":"30px"}},[a("span",{staticClass:"span-used"}),t._v(" 空闲车位："+t._s(t.dataList.unuseAll)+" ")])])],1)]),a("div",[a("el-row",{staticStyle:{"margin-bottom":"10px","font-size":"12px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v(" 停车场 ")]),a("el-col",{attrs:{span:4}},[t._v(" 已用 ")]),a("el-col",{attrs:{span:4}},[t._v(" 未用 ")]),a("el-col",{attrs:{span:8}},[t._v(" 已用占比 ")])],1),a("div",{staticClass:"record-table-container",on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},t._l(t.animationData,(function(e,n){return a("el-row",{key:n,ref:"table1",refInFor:!0,class:{moveToBottom:t.animationActive,show:t.animationActive&&0===n},staticStyle:{"font-size":"12px","margin-bottom":"8px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v(" "+t._s(e.name)+" ")]),a("el-col",{attrs:{span:4}},[t._v(" "+t._s(e.used)+" ")]),a("el-col",{attrs:{span:4}},[t._v(" "+t._s(e.unused)+" ")]),a("el-col",{attrs:{span:8}},[a("el-progress",{attrs:{"show-text":!1,percentage:e.percentage,format:t.format}})],1)],1)})),1)],1)])])},r=[],i=a("c7eb"),s=a("1da1"),o=a("2909"),c=(a("fb6a"),a("b680"),a("d3b7"),a("159b"),a("1e55")),u={components:{},props:{parkingLotIds:{type:Array,default:function(){return[]}}},data:function(){return{timer:null,currentIndex:0,dataList:{array:[]},animationData:[],animationActive:!1,num1:"12",list:[{name:"吴门车场",num1:"100",num2:"100"},{name:"吴门场",num1:"100",num2:"100"}]}},watch:{parkingLotIds:{handler:function(t,e){null!==t&&void 0!==t&&t[0]?(this.getParkingRelatedInfoFunone(t),this.scrollTable()):(this.getParkingRelatedInfoFunone("all"),this.scrollTable())},deep:!0}},mounted:function(){this.getParkingRelatedInfoFunone("all"),this.scrollTable(),console.log(this.data)},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{onMouseLeave:function(){this.initAnimationData()},onMouseEnter:function(){clearInterval(this.timer),this.animationData=this.dataList.array},scrollTable:function(){this.timer&&clearInterval(this.timer);var t=!0,e=this.$refs.table1.bodyWrapper;e.addEventListener("mouseover",(function(){t=!1})),e.addEventListener("mouseout",(function(){t=!0})),this.timer=setInterval((function(){t&&(e.scrollTop+=1,e.scrollHeight-(e.clientHeight+e.scrollTop)<1&&(e.scrollTop=0))}),40)},gdonMouseOver:function(){clearInterval(this.secInterValId)},gdmouseout:function(){this.gdScroll()},timeFunc:function(){var t=this,e=function(){var e=t.dataList.array.shift();t.dataList.array.push(e),t.animationData=Object(o["a"])(t.dataList.array.slice(0,5))};e(),this.timer=setInterval(e,1500)},initAnimationData:function(){this.animationData=this.dataList.array.slice(-5),this.timeFunc()},getParkingRelatedInfoFunone:function(t){var e=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(c["l"])(t);case 3:n=a.sent,200===n.code&&(e.dataList=e.transformData(n.data),e.dataList.array.forEach((function(t){e.$set(t,"percentage",100*(t.used/(t.used+t.unused)).toFixed(2))})),e.percentageALL=100*(e.dataList.useAll/e.dataList.total).toFixed(2),e.initAnimationData()),a.next=9;break;case 7:a.prev=7,a.t0=a["catch"](0);case 9:e.$bus.$emit("screenDataLoaded");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},transformData:function(t){var e=t.leisureParkingSpace.leisureParkingSpaceSum+t.occupyParkingSpace.occupyParkingSpaceSum,a=t.occupyParkingSpace.occupyParkingSpaceSum,n=t.leisureParkingSpace.leisureParkingSpaceSum,r=[];for(var i in t.leisureParkingSpace)"number"===typeof t.leisureParkingSpace[i]&&"number"===typeof t.occupyParkingSpace[i]&&r.push({name:i,used:t.occupyParkingSpace[i],unused:t.leisureParkingSpace[i]});return{total:e,useAll:a,unuseAll:n,array:r}},format:function(t){return 100===t?"满":"".concat(t,"%")}}},l=u,d=(a("4085"),a("2877")),m=Object(d["a"])(l,n,r,!1,null,"6ad3f842",null);e["default"]=m.exports},"1e55":function(t,e,a){"use strict";a.d(e,"h",(function(){return g})),a.d(e,"c",(function(){return f})),a.d(e,"f",(function(){return h})),a.d(e,"m",(function(){return v})),a.d(e,"a",(function(){return y})),a.d(e,"o",(function(){return b})),a.d(e,"j",(function(){return S})),a.d(e,"n",(function(){return k})),a.d(e,"b",(function(){return L})),a.d(e,"q",(function(){return D})),a.d(e,"p",(function(){return I})),a.d(e,"g",(function(){return P})),a.d(e,"d",(function(){return j})),a.d(e,"k",(function(){return x})),a.d(e,"i",(function(){return A})),a.d(e,"l",(function(){return O})),a.d(e,"e",(function(){return w})),a.d(e,"r",(function(){return T}));a("a15b"),a("c7eb"),a("1da1");var n=a("53ca"),r=(a("caad"),a("fb6a"),a("e9c4"),a("b64b"),a("d3b7"),a("2532"),a("bc3a")),i=a.n(r),s=a("5c96"),o=a("4360"),c=(a("5f87"),a("81ae")),u=a("c38a"),l=a("63f0"),d=(a("21a6"),{show:!1});i.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var m=i.a.create({baseURL:"/api",timeout:1e4});m.interceptors.request.use((function(t){var e=!1===(t.headers||{}).isToken,a=!1===(t.headers||{}).repeatSubmit,r="eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6IjZhMGMzMGU5LWU5YzAtNDk4Ni1iZTRjLTk0NzRhMDM3OGM4MyJ9.xpwt1tZG44qGYW1NA-55T7kAR53lR6-DsTTXY2zQzzCciBRZml5EZrACcGkJYVVp7m0JgI57sdSCNUJkzd6NJg";if(r&&!e&&(t.headers["Authorization"]="Bearer "+r),"get"===t.method&&t.params){var i=t.url+"?"+Object(u["j"])(t.params);i=i.slice(0,-1),t.params={},t.url=i}if(!a&&("post"===t.method||"put"===t.method)){var s={url:t.url,data:"object"===Object(n["a"])(t.data)?JSON.stringify(t.data):t.data,time:(new Date).getTime()},o=l["a"].session.getJSON("sessionObj");if(void 0===o||null===o||""===o)l["a"].session.setJSON("sessionObj",s);else{var c=o.url,d=o.data,m=o.time,p=1e3;if(d===s.data&&s.time-m<p&&c===s.url){var g="数据正在处理，请勿重复提交";return console.warn("[".concat(c,"]: ")+g),Promise.reject(new Error(g))}l["a"].session.setJSON("sessionObj",s)}}return t}),(function(t){console.log(t),Promise.reject(t)})),m.interceptors.response.use((function(t){var e=t.data.code||200,a=c["a"][e]||t.data.msg||c["a"]["default"];return"blob"===t.request.responseType||"arraybuffer"===t.request.responseType?t.data:401===e?(d.show||(d.show=!0,s["MessageBox"].confirm("登录状态已过期，您可以继续留在该页面，或者重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){d.show=!1,o["a"].dispatch("LogOut").then((function(){location.href="/index"}))})).catch((function(){d.show=!1}))),Promise.reject("无效的会话，或者会话已过期，请重新登录。")):500===e?(Object(s["Message"])({message:a,type:"error"}),Promise.reject(new Error(a))):200!==e?(s["Notification"].error({title:a}),Promise.reject("error")):t.data}),(function(t){console.log("err"+t);var e=t.message;return"Network Error"==e?e="后端接口连接异常":e.includes("timeout")?e="系统接口请求超时":e.includes("Request failed with status code")&&(e="系统接口"+e.substr(e.length-3)+"异常"),Object(s["Message"])({message:e,type:"error",duration:5e3}),Promise.reject(t)}));var p=m,g=function(){return p({url:"/system/StatisticalData/getMapDataList",method:"get"})};function f(t){return p({url:"/system/StatisticalData/getClockInTodayTollCollector",method:"get",params:{deptIds:t}})}function h(t){return p({url:"/system/StatisticalData/getImg",method:"get",params:{imgId:t}})}function v(t){return p({url:"/system/StatisticalData/getPreferentialOrderTypeProportion",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function y(t){return p({url:"/system/StatisticalData/getAbnormalOrderTypeProportion",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function b(t){return p({url:"/system/StatisticalData/getSourceOfIncomeProportion",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function S(t){return p({url:"/system/StatisticalData/getParkingOrderIncomeTotalByDeptId",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function k(t){return p({url:"/system/StatisticalData/getReceiveRecord",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function L(t){return p({url:"/system/StatisticalData/getAccessRecord",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function D(t){return p({url:"/system/StatisticalData/getWarningOrder",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function I(t){return p({url:"/system/StatisticalData/getWarningLock",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function P(t){return p({url:"/system/StatisticalData/getOrderRevenueLineChart",method:"get",params:{parkingLotIds:null===t||void 0===t?void 0:t.join(",")}})}function j(){return p({url:"/system/StatisticalData/getDeptRelatedInfo",method:"get"})}function x(t){var e="all"==t?"/system/StatisticalData/getParkingOrderTypePieChart":"/system/StatisticalData/getParkingOrderTypePieChart?parkingLotIds=".concat(t);return p({url:e,method:"get"})}function A(t){var e="all"==t?"/system/StatisticalData/getParkingOrderDurationPercentagePieChart":"/system/StatisticalData/getParkingOrderDurationPercentagePieChart?parkingLotIds=".concat(t);return p({url:e,method:"get"})}function O(t){var e="all"==t?"/system/StatisticalData/getParkingRelatedInfo":"/system/StatisticalData/getParkingRelatedInfo?parkingLotIds=".concat(t);return p({url:e,method:"get"})}function w(){return p({url:"/system/StatisticalData/getDeptRelatedInfo",method:"get"})}function T(t){var e="all"==t?"/system/StatisticalData/todayYesterdayDataComparison":"/system/StatisticalData/todayYesterdayDataComparison?parkingLotIds=".concat(t);return p({url:e,method:"get"})}},4085:function(t,e,a){"use strict";a("4e22")},"4e22":function(t,e,a){}}]);